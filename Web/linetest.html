<html> <head>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">

      // Load the Visualization API and the controls package.
      google.charts.load('current', {'packages':['controls', 'corechart']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.charts.setOnLoadCallback(initialize);

      // Callback that creates and populates a data table,
      // instantiates a dashboard, a range slider and a pie chart,
      // passes in the data and draws it.
    function initialize() {

 // var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/18BvmXSqMCNpIeoL9rJpELn6GFevH8GcuspQ9qb4leNQ/edit?usp=sharing');


  // Send the query with a callback function.
  //query.send(drawDashboard);


  var queryString = encodeURIComponent('range=A1:L22');
    //var query = new google.visualization.Query(
     //   'https://docs.google.com/spreadsheets/d/16tS1oa14qOgNNWGR3lEaFYIYAoAsCeMbvbJDpsuLsbQ/gviz/tq?sheet='
     //   + 'Dashboard_Health' +'&headers=1&tq?' + 'range=A1:L22' );

     var query = new google.visualization.Query(
       'https://docs.google.com/spreadsheets/d/19XH4jbKGMJS6aarHaSE-1GISPpuA377jl5GwWM7XTYU/gviz/tq?sheet='
        + 'Line_Change' +'&headers=1&tq?' + 'range=A1:L22' ); 
     

    query.send(drawLineDashboard)    

}

function drawLineDashboard(response) {
  var data = response.getDataTable();
 
  //First Control wrapper  - Filters by Category of Data
  var namePicker = new google.visualization.ControlWrapper({
    'controlType': 'CategoryFilter',
    'containerId': 'filter_div',
    'options': {
      'filterColumnLabel': 'Type',
      'ui': {
        'label': 'Spending Representation',
        'labelStacking': 'vertical',
        'allowTyping': false, //User gets a text box to type into
        'allowMultiple': false,   /// Lets you select dorp-down options one at a time, can click multiple at a time - Useful but not for here
        'allowNone' : false //disables the "Select a value" - it's confusing
      }
    },
    state: {
      selectedValues: ['Absolute']
    }
  });

  
  //Actual chart wrapper here
  var DashColumnChart = new google.visualization.ChartWrapper({
    'chartType': 'LineChart',
    'containerId': 'chart_div',
    view: {columns: [1,2,3,4,5,6,7,8,9,10,11]},
    options : {
                    chartArea: {width:'60%', height:'60%'},
                    width : 1000,
                    height: 400,
                    vAxis: {title: 'Spending',  format: 'short', gridlines: {color: 'transparent'}},
                    hAxis: {title: 'Year', slantedText: false, format:'#,####', minorGridlines: {color: 'transparent'} },
                    //colors: ['#e6194B', '#3cb44b', '#ffe119', '#4363d8', '#f58231', '#911eb4', '#42d4f4', '#f032e6', '#bfef45', '#000',]  
                    colors: ['#e6194B', '#f58231', '#ffe119', '#bfef45', '#3cb44b', '#42d4f4', '#4363d8', '#911eb4', '#bfef45', '#000',],   
                    explorer: { 
            actions: ['dragToZoom', 'rightClickToReset'],
            keepInBounds: true,
            maxZoomIn: 4.0},          
                },
            

  });

  //Bind the control wrapers to the data, then draw the chart
  var dashboard = new google.visualization.Dashboard(document.getElementById('dashboard_div')).
    bind([namePicker], DashColumnChart).
    draw(data)

    console.log(data)
} // End of the dashboard script
    </script>
  </head>

  <body>
    <!--Div that will hold the dashboard-->
    <div id="dashboard_div">
      <!--Divs that will hold each control and chart-->
      <div id="filter_div"></div>
      <div id="filter2_div"></div>
      <div id="chart_div" style="height: 800px;"></div>
    </div>
  </body>


</html>